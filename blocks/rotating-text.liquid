<script defer src="{{ 'rotating-text.js' | asset_url }}"></script>

{% liquid
  assign block_id = block.id
%}

<div class="rotating-text text-blue text-2xl font-medium" id="rotating-text-{{ block_id }}">
  <div class="rotating-text__viewport" aria-hidden="true">
    <div
      class="rotating-text__track"
      data-speed="{{ block.settings.speed }}"
      data-gap="{{ block.settings.gap }}"
    >
      <span class="rotating-text__segment">
        {{ block.settings.text }}
      </span>
    </div>
  </div>
</div>

{% stylesheet %}
  .rotating-text {
    position: relative;
    padding-top: 24px;
    padding-bottom: 24px;
    margin-top: -64px;
  }

  .rotating-text__viewport {
    overflow: hidden;
    width: 100%;
  }

  .rotating-text__track {
    display: inline-flex;
    align-items: center;
    gap: var(--rt-gap, 2rem);
    will-change: transform;
    transform: translate3d(0, 0, 0);
    animation: rt-marquee linear infinite;
    animation-duration: var(--rt-duration, 20s);
  }

  .rotating-text__segment {
    white-space: nowrap;
  }

  @keyframes rt-marquee {
    to {
      transform: translate3d(calc(-1 * var(--rt-segment-width, 0px)), 0, 0);
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Rotating text",
  "tag": "div",
  "class": "rotating-text-block",
  "settings": [
    { "type": "text", "id": "text", "label": "Text", "default": "Rotating text" },
    { "type": "range", "id": "speed", "label": "Speed", "min": 10, "max": 200, "step": 5, "default": 60, "unit": "px" },
    { "type": "range", "id": "gap", "label": "Gap", "min": 0, "max": 100, "step": 2, "default": 24, "unit": "px" }
  ],
  "presets": [{ "name": "Rotating text" }]
}
{% endschema %}
