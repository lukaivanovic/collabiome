{%- liquid
  assign benefits = product.metafields.custom.benefits_content.value
  assign benefits_title = product.metafields.custom.benefits_title.value
  assign benefits_description = product.metafields.custom.benefits_description.value
  assign product_theme = product.metafields.custom.theme.value | default: 'default'
  assign benefits_count = benefits.size

  case product_theme
    when 'recupera'
      assign product_theme_class = 'product-theme-recupera'
    when 'boost'
      assign product_theme_class = 'product-theme-boost'
    else
      assign product_theme_class = 'product-theme-default'
  endcase

  if benefits_count == 2
    assign container_class = 'flex flex-col md:flex-row justify-center items-start gap-8 max-w-4xl mx-auto'
  else
    assign container_class = 'grid grid-cols-1 md:grid-cols-3 gap-8'
  endif
-%}

<div class="container-small py-20 {{ product_theme_class }}">
  <div class="p-8">
    <div class="text-center mb-12">
      <h2 class="text-4xl uppercase font-medium">{{ benefits_title | default: 'Product Benefits' }}</h2>

      {% if benefits_description %}
        <p class="text-base opacity-70 mt-2">{{ benefits_description }}</p>
      {% endif %}
    </div>

    <div class="{{ container_class }}">
      {% for benefit in benefits %}
        <div class="flex flex-col items-center text-center{% if benefits_count == 2 %} md:w-1/2{% endif %}">
          <div class="mb-4 size-30">
            {% render 'image', image: benefit.image_icon, class: 'w-full h-full object-cover' %}
          </div>

          <div>
            {% if benefit.title %}
              <h3 class="font-semibold text-lg mb-2">{{ benefit.title }}</h3>
            {% endif %}

            {% if benefit.description %}
              <p class="text-sm opacity-70">{{ benefit.description }}</p>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Product Benefits",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    }
  ],
  "presets": [
    {
      "name": "Product Benefits",
      "category": "Product"
    }
  ]
}
{% endschema %}
