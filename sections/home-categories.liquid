{% liquid
  assign section_id = section.settings.custom_id | default: section.id
%}

<div class="container relative py-[120px]">
  {% if section.settings.title != blank %}
    <h2 class="text-xl uppercase">{{ section.settings.title | escape }}</h2>
  {% endif %}
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 mt-12">
    {% for block in section.blocks %}
      <a
        href="{{ block.settings.button_url }}"
        class="category-card flex flex-col relative overflow-hidden rounded-xl bg-black group shadow-sm"
        {{ block.shopify_attributes }}
      >
        {% render 'image', image: block.settings.image, width: 1200, height: 1200, class: 'w-full h-full flex-1' %}

        <div class="p-6  grid gap-1 bg-white">
          {% if block.settings.title != blank %}
            <h3 class="text-2xl uppercase font-medium">{{ block.settings.title | escape }}</h3>
          {% endif %}
          {% if block.settings.description != blank %}
            <p class="text-white/80 m-0 mb-4">{{ block.settings.description | escape }}</p>
          {% endif %}
          {% if block.settings.button_text != blank %}
            <div class="button button-boost">
              {{- block.settings.button_text | escape -}}
            </div>
          {% endif %}
        </div>
      </a>
    {% endfor %}
  </div>
</div>

{% stylesheet %}
  .category-card {
    box-shadow: 0 0 0 1px rgba(246, 180, 202, 0.5) inset;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Home categories",
  "tag": "section",
  "max_blocks": 3,
  "settings": [{ "type": "text", "id": "title", "label": "Text", "default": "Home categories" }],
  "blocks": [
    {
      "type": "category_card",
      "name": "Category card",
      "limit": 3,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Category"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Describe this category"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text",
          "default": "Button text"
        },
        { "type": "url", "id": "button_url", "label": "Button URL" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Home categories",
      "blocks": [
        {
          "type": "category_card",
          "settings": {
            "title": "Category",
            "description": "Describe this category"
          }
        },
        {
          "type": "category_card",
          "settings": {
            "title": "Category",
            "description": "Describe this category"
          }
        },
        {
          "type": "category_card",
          "settings": {
            "title": "Category",
            "description": "Describe this category"
          }
        }
      ]
    }
  ]
}
{% endschema %}
