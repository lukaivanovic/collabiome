{% liquid
  assign section_id = section.settings.custom_id | default: section.id
%}

<div class="container relative pt-32 pb-20 ">
  {% if section.settings.title != blank %}
    <h2 class="text-4xl text-center pb-1">{{ section.settings.title | escape }}</h2>
    {% if section.settings.description != blank %}
      <p class="text-secondary text-center">{{ section.settings.description | escape }}</p>
    {% endif %}
  {% endif %}
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 pt-12">
    {% for block in section.blocks %}
      <a
        href="{{ block.settings.button_url }}"
        class="category-card flex flex-col relative overflow-hidden rounded-xl bg-black group shadow-sm"
        {{ block.shopify_attributes }}
      >
        {% render 'image', image: block.settings.image, width: 1200, height: 1200, class: 'w-full h-full flex-grow' %}

        <div class="p-6 flex flex-col items-center justify-between text-center gap-1 bg-white h-55">
          <div>
            {% if block.settings.title != blank %}
              <h3 class="text-3xl pb-1">{{ block.settings.title | escape }}</h3>
            {% endif %}
            {% if block.settings.description != blank %}
              <p class="text-black/80 ">{{ block.settings.description | escape }}</p>
            {% endif %}
          </div>
          {% if block.settings.button_text != blank %}
            <div class="button button-neutral">
              {{- block.settings.button_text | escape -}}
            </div>
          {% endif %}
        </div>
      </a>
    {% endfor %}
  </div>
</div>

{% stylesheet %}
  .home-categories__section {
    background: linear-gradient(
        0deg,
        hsla(0, 0%, 100%, 0) 0%,
        hsla(0, 0%, 100%, 0) 14%,
        hsla(0, 0%, 100%, 0.02) 29%,
        hsla(0, 0%, 100%, 0.08) 43%,
        hsla(0, 0%, 100%, 0.19) 57%,
        hsla(0, 0%, 100%, 0.36) 71%,
        hsla(0, 0%, 100%, 0.63) 86%,
        hsla(0, 0%, 100%, 1) 100%
      ),
      linear-gradient(
        86deg,
        color-mix(in srgb, #a2eeff 90%, transparent) -1.58%,
        color-mix(in srgb, #b4ceff 90%, transparent) 49.21%,
        color-mix(in srgb, #d4b9ff 90%, transparent) 100%
      );
  }

  .category-card {
    box-shadow: 0 0 0 1px rgba(246, 180, 202, 0.5) inset;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Home categories",
  "tag": "section",
  "class": "home-categories__section",
  "max_blocks": 3,
  "settings": [
    { "type": "text", "id": "title", "label": "Text", "default": "Home categories" },
    { "type": "textarea", "id": "description", "label": "Description", "default": "Describe this category" }
  ],
  "blocks": [
    {
      "type": "category_card",
      "name": "Category card",
      "limit": 3,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Category"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Describe this category"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text",
          "default": "Button text"
        },
        { "type": "url", "id": "button_url", "label": "Button URL" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Home categories",
      "blocks": [
        {
          "type": "category_card",
          "settings": {
            "title": "Category",
            "description": "Describe this category"
          }
        },
        {
          "type": "category_card",
          "settings": {
            "title": "Category",
            "description": "Describe this category"
          }
        },
        {
          "type": "category_card",
          "settings": {
            "title": "Category",
            "description": "Describe this category"
          }
        }
      ]
    }
  ]
}
{% endschema %}
