{% liquid
  assign section_id = section.settings.custom_id | default: section.id
  assign section_class = 'section-' | append: section.type
%}



<script defer src="{{ 'countdown.js' | asset_url }}"></script>

<section
  id="{{ section_id }}"
  class="{{ section_class }} announcement-bar full-width"
  role="region"
  aria-label="{{ 'general.announcement_bar' | t }}"
>
  <div class="announcement-bar__inner">
    {% if section.settings.link_url != blank %}
      <a class="announcement-bar__link" href="{{ section.settings.link_url }}">
        {% if section.settings.enable_countdown and section.settings.countdown_target != blank %}
          <div class="announcement-bar__countdown" data-target="{{ section.settings.countdown_target | escape }}">
            {% if section.settings.message != blank %}
              <span class="announcement-bar__text">{{ section.settings.message }}</span>
            {% endif %}
            <span class="announcement-bar__timer" aria-live="polite">
              {{ 'general.countdown.ends_in' | t }}
              <span class="time days">00</span>{{ 'general.time.d_short' | t }}
              <span class="time hours">00</span>{{ 'general.time.h_short' | t }}
              <span class="time minutes">00</span>{{ 'general.time.m_short' | t }}
              <span class="time seconds">00</span>{{ 'general.time.s_short' | t }}
            </span>
          </div>
        {% else %}
          <span class="announcement-bar__text">{{ section.settings.message }}</span>
        {% endif %}
        <span class="announcement-bar__cta">{{ 'general.click_here' | t }}</span>
      </a>
    {% else %}
      {% if section.settings.enable_countdown and section.settings.countdown_target != blank %}
        <div class="announcement-bar__countdown" data-target="{{ section.settings.countdown_target | escape }}">
          {% if section.settings.message != blank %}
            <span class="announcement-bar__text">{{ section.settings.message }}</span>
          {% endif %}
          <span class="announcement-bar__timer" aria-live="polite">
            {{ 'general.countdown.ends_in' | t }}
            <span class="time days">00</span>{{ 'general.time.d_short' | t }}
            <span class="time hours">00</span>{{ 'general.time.h_short' | t }}
            <span class="time minutes">00</span>{{ 'general.time.m_short' | t }}
            <span class="time seconds">00</span>{{ 'general.time.s_short' | t }}
          </span>
        </div>
      {% else %}
        <p class="announcement-bar__text">{{ section.settings.message }}</p>
      {% endif %}
    {% endif %}
  </div>
</section>

{% stylesheet %}
  .announcement-bar {
    width: 100%;
    background: var(--color-gradient1, linear-gradient(to right, #f6f6f7, #e0e0e0));
    color: var(--color-foreground, #202223);
  }
  .announcement-bar__inner {
    display: grid;
    grid-template-columns: var(--content-grid);
    padding: 8px 0;
  }
  .announcement-bar__text {
    grid-column: 1 / -1;
    text-align: center;
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.4;
  }
  .announcement-bar__link {
    grid-column: 1 / -1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    color: inherit;
    text-decoration: none;
    width: 100%;
  }
  .announcement-bar__cta {
    text-decoration: underline;
  }
  .announcement-bar__countdown {
    grid-column: 1 / -1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  .announcement-bar__timer {
    font-variant-numeric: tabular-nums;
    white-space: nowrap;
  }
{% endstylesheet %}



{% schema %}
{
  "name": "t:general.announcement_bar",
  "tag": "section",
  "class": "announcement-bar",
  "settings": [
    {
      "type": "text",
      "id": "message",
      "label": "t:labels.text",
      "default": "Free shipping on orders over $50"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "t:labels.link_url"
    },
    {
      "type": "checkbox",
      "id": "enable_countdown",
      "label": "t:labels.enable_countdown",
      "default": false
    },
    {
      "type": "text",
      "id": "countdown_target",
      "label": "t:labels.countdown_target",
      "info": "t:labels.countdown_target_info",
      "placeholder": "2025-12-31T23:59:59Z"
    }
  ],
  "presets": [
    { "name": "t:general.announcement_bar" }
  ]
}
{% endschema %}


