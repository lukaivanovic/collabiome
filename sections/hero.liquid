{% liquid
  assign section_id = section.settings.custom_id | default: section.id
%}

<div class="hero w-full relative" id="hero-{{ section_id }}">
  <div class="absolute inset-0 z-0 overflow-hidden" aria-hidden="true">
    {% if section.settings.video != blank %}
      {{
        section.settings.video
        | video_tag:
          autoplay: true,
          loop: true,
          muted: true,
          playsinline: true,
          controls: false,
          class: 'absolute inset-0 w-full h-full object-cover'
      }}
    {% elsif section.settings.video_url != blank %}
      {{
        section.settings.video_url
        | external_video_tag:
          autoplay: true,
          loop: true,
          muted: true,
          playsinline: true,
          controls: false,
          class: 'absolute inset-0 w-full h-full object-cover'
      }}
    {% elsif section.settings.image != blank %}
      {{
        section.settings.image
        | image_url: width: 2400
        | image_tag:
          loading: 'eager',
          fetchpriority: 'high',
          sizes: '100vw',
          alt: section.settings.title,
          class: 'absolute inset-0 w-full h-full object-cover'
        | escape
      }}
    {% else %}
      <div class="w-full h-full bg-gradient-to-b from-black/4 to-black/12"></div>
    {% endif %}
    <div
      class="absolute inset-0 pointer-events-none"
      style="background: {{ section.settings.overlay_color | default: '#000000' }}; opacity: {{ section.settings.overlay_opacity | default: 30 | divided_by: 100.0 }};"
    ></div>
  </div>

  <div class="container relative flex items-end" style="min-height: 80svh;">
    <div class="grid gap-3 max-w-[min(64ch,90%)] md:max-w-[min(64ch,90%)] pb-12" data-align="bottom-left">
      {% if section.settings.kicker != blank %}
        <p class="text-white text-sm tracking-wider uppercase opacity-90">
          {{ section.settings.kicker | escape }}
        </p>
      {% endif %}
      {% if section.settings.title != blank %}
        <h1 class=" uppercase text-white leading-tight font-bold">{{ section.settings.title | escape }}</h1>
      {% endif %}
      {% if section.settings.description != blank %}
        <div class=" text-white/80">{{ section.settings.description }}</div>
      {% endif %}
      {% if section.settings.show_buttons %}
        <div class="flex gap-4 flex-wrap mt-4">
          {% if section.settings.button_label != blank and section.settings.button_link != blank %}
            <a class="button button-boost text-white" href="{{ section.settings.button_link }}">
              {{- section.settings.button_label | escape -}}
            </a>
          {% endif %}
          {% if section.settings.button_2_label != blank and section.settings.button_2_link != blank %}
            <a
              class="bg-transparent border border-foreground text-foreground px-4 py-2 rounded hover:bg-foreground hover:text-background transition-colors"
              href="{{ section.settings.button_2_link }}"
            >
              {{- section.settings.button_2_label | escape -}}
            </a>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Hero",
  "tag": "section",
  "class": "hero-section",
  "settings": [
    { "type": "header", "content": "Content" },
    { "type": "text", "id": "kicker", "label": "Kicker" },
    { "type": "text", "id": "title", "label": "Title", "default": "Hero title" },
    { "type": "richtext", "id": "description", "label": "Description" },
    { "type": "checkbox", "id": "show_buttons", "label": "Show buttons", "default": true },
    { "type": "text", "id": "button_label", "label": "Primary button label", "default": "Button label" },
    { "type": "url", "id": "button_link", "label": "Primary button link" },
    { "type": "text", "id": "button_2_label", "label": "Secondary button label" },
    { "type": "url", "id": "button_2_link", "label": "Secondary button link" },

    { "type": "header", "content": "Media" },
    { "type": "video", "id": "video", "label": "Video" },
    { "type": "video_url", "id": "video_url", "label": "Video URL", "accept": ["youtube", "vimeo"] },
    { "type": "image_picker", "id": "image", "label": "Image" },

    { "type": "header", "content": "Colors" },
    { "type": "color", "id": "overlay_color", "label": "Background", "default": "#000000", "alpha": true },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 30,
      "unit": "%"
    }
  ],
  "presets": [{ "name": "Hero", "category": "Main" }]
}
{% endschema %}
