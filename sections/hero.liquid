{% liquid
  assign section_id = section.settings.custom_id | default: section.id
%}

<div class="hero full-width" id="hero-{{ section_id }}">
  <div class="hero__media" aria-hidden="true">
    {% if section.settings.video != blank %}
      {{
        section.settings.video
        | video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false
      }}
    {% elsif section.settings.video_url != blank %}
      {{
        section.settings.video_url
        | external_video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false
      }}
    {% elsif section.settings.image != blank %}
      {{
        section.settings.image
        | image_url: width: 2400
        | image_tag: loading: 'eager', fetchpriority: 'high', sizes: '100vw', alt: section.settings.title
        | escape
      }}
    {% else %}
      <div class="hero__placeholder"></div>
    {% endif %}
    <div
      class="hero__scrim"
      style="--hero-overlay-color: {{ section.settings.overlay_color | default: '#000000' }}; --hero-overlay-opacity: {{ section.settings.overlay_opacity | default: 30 }};"
    ></div>
  </div>

  <div class="container hero__inner" style="--hero-height: 80svh;">
    <div class="hero__content" data-align="bottom-left">
      {% if section.settings.kicker != blank %}
        <p class="hero__kicker text-white">{{ section.settings.kicker | escape }}</p>
      {% endif %}
      {% if section.settings.title != blank %}
        <h1 class="text-3xl uppercase text-white">{{ section.settings.title | escape }}</h1>
      {% endif %}
      {% if section.settings.description != blank %}
        <div class="hero__description text-white">{{ section.settings.description }}</div>
      {% endif %}
      {% if section.settings.button_label != blank and section.settings.button_link != blank %}
        <a class="hero__button text-white" href="{{ section.settings.button_link }}">
          {{- section.settings.button_label | escape -}}
        </a>
      {% endif %}
    </div>
  </div>
</div>

{% stylesheet %}
  .hero {
    position: relative;
  }

  .hero__media {
    position: absolute;
    inset: 0;
    z-index: 0;
    overflow: clip;
  }

  .hero__media video,
  .hero__media iframe,
  .hero__media img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero__placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, rgb(0 0 0 / 0.04), rgb(0 0 0 / 0.12));
  }

  .hero__scrim {
    position: absolute;
    inset: 0;
    background: var(--hero-overlay-color);
    opacity: calc(var(--hero-overlay-opacity, 30) / 100);
    pointer-events: none;
  }

  .hero__inner {
    position: relative;
    z-index: 1;
    min-height: var(--hero-height, 80svh);
    display: flex;
    align-items: end;
  }

  .hero__content {
    display: grid;
    gap: 0.75rem;
    max-width: min(48ch, 90%);
    color: var(--color-hero-foreground, var(--color-foreground));
  }

  .hero__kicker {
    font-size: 0.8125rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    opacity: 0.9;
  }

  .hero__title {
    font-size: clamp(2rem, 5vw, 3rem);
    line-height: 1.1;
    font-weight: 700;
  }

  .hero__description {
    font-size: 1rem;
    opacity: 0.95;
  }

  .hero__button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 40px;
    padding: 0 1rem;
    border-radius: var(--style-border-radius-buttons, 8px);
    background: var(--color-foreground);
    color: var(--color-background);
    text-decoration: none;
    width: fit-content;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.hero",
  "tag": "section",
  "class": "hero-section",
  "settings": [
    { "type": "header", "content": "t:general.content" },
    { "type": "text", "id": "kicker", "label": "t:labels.text" },
    { "type": "text", "id": "title", "label": "t:labels.text", "default": "t:sections.hero.default_title" },
    { "type": "richtext", "id": "description", "label": "t:labels.text" },
    { "type": "text", "id": "button_label", "label": "t:labels.text", "default": "t:sections.hero.default_button" },
    { "type": "url", "id": "button_link", "label": "t:labels.link_url" },

    { "type": "header", "content": "t:general.media" },
    { "type": "video", "id": "video", "label": "t:general.media" },
    { "type": "video_url", "id": "video_url", "label": "t:general.media", "accept": ["youtube", "vimeo"] },
    { "type": "image_picker", "id": "image", "label": "t:general.media" },

    { "type": "header", "content": "t:general.colors" },
    { "type": "color", "id": "overlay_color", "label": "t:labels.background", "default": "#000000", "alpha": true },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "t:labels.opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 30,
      "unit": "%"
    }
  ],
  "presets": [{ "name": "t:general.hero", "category": "t:general.main" }]
}
{% endschema %}
