{% liquid
  assign section_id = section.settings.custom_id | default: section.id
%}

<div class="hero full-width relative" id="hero-{{ section_id }}">
  <div class="hero__media" aria-hidden="true">
    {% if section.settings.video != blank %}
      {{
        section.settings.video
        | video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false
      }}
    {% elsif section.settings.video_url != blank %}
      {{
        section.settings.video_url
        | external_video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false
      }}
    {% elsif section.settings.image != blank %}
      {{
        section.settings.image
        | image_url: width: 2400
        | image_tag: loading: 'eager', fetchpriority: 'high', sizes: '100vw', alt: section.settings.title
        | escape
      }}
    {% else %}
      <div class="hero__placeholder"></div>
    {% endif %}
    <div
      class="hero__scrim"
      style="--hero-overlay-color: {{ section.settings.overlay_color | default: '#000000' }}; --hero-overlay-opacity: {{ section.settings.overlay_opacity | default: 30 }};"
    ></div>
  </div>

  <div class="container hero__inner relative z-10 flex items-end" style="--hero-height: 80svh;">
    <div class="hero__content grid gap-3 max-w-[min(64ch,90%)] md:max-w-[min(64ch,90%)] pb-12" data-align="bottom-left">
      {% if section.settings.kicker != blank %}
        <p class="hero__kicker text-white text-[0.8125rem] tracking-wider uppercase opacity-90">{{ section.settings.kicker | escape }}</p>
      {% endif %}
      {% if section.settings.title != blank %}
        <h1 class="text-6xl uppercase text-white leading-tight font-bold">{{ section.settings.title | escape }}</h1>
      {% endif %}
      {% if section.settings.description != blank %}
        <div class="hero__description text-base">{{ section.settings.description }}</div>
      {% endif %}
      {% if section.settings.show_buttons %}
        <div class="hero__buttons flex gap-4 flex-wrap mt-4">
          {% if section.settings.button_label != blank and section.settings.button_link != blank %}
            <a class="button button-recupera text-white" href="{{ section.settings.button_link }}">
              {{- section.settings.button_label | escape -}}
            </a>
          {% endif %}
          {% if section.settings.button_2_label != blank and section.settings.button_2_link != blank %}
            <a class="hero__button--secondary text-white" href="{{ section.settings.button_2_link }}">
              {{- section.settings.button_2_label | escape -}}
            </a>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% stylesheet %}
  .hero__media {
    position: absolute;
    inset: 0;
    z-index: 0;
    overflow: clip;
  }

  .hero__media video,
  .hero__media iframe,
  .hero__media img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero__placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, rgb(0 0 0 / 0.04), rgb(0 0 0 / 0.12));
  }

  .hero__scrim {
    position: absolute;
    inset: 0;
    background: var(--hero-overlay-color);
    opacity: calc(var(--hero-overlay-opacity, 30) / 100);
    pointer-events: none;
  }

  .hero__inner {
    min-height: var(--hero-height, 80svh);
  }

  .hero__description {
    color: color-mix(in srgb, white 80%, transparent);
  }

  .hero__button--secondary {
    background: transparent;
    border: 1px solid var(--color-foreground);
    color: var(--color-foreground);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Hero",
  "tag": "section",
  "class": "hero-section",
  "settings": [
    { "type": "header", "content": "Content" },
    { "type": "text", "id": "kicker", "label": "Kicker" },
    { "type": "text", "id": "title", "label": "Title", "default": "Hero title" },
    { "type": "richtext", "id": "description", "label": "Description" },
    { "type": "checkbox", "id": "show_buttons", "label": "Show buttons", "default": true },
    { "type": "text", "id": "button_label", "label": "Primary button label", "default": "Button label" },
    { "type": "url", "id": "button_link", "label": "Primary button link" },
    { "type": "text", "id": "button_2_label", "label": "Secondary button label" },
    { "type": "url", "id": "button_2_link", "label": "Secondary button link" },

    { "type": "header", "content": "Media" },
    { "type": "video", "id": "video", "label": "Video" },
    { "type": "video_url", "id": "video_url", "label": "Video URL", "accept": ["youtube", "vimeo"] },
    { "type": "image_picker", "id": "image", "label": "Image" },

    { "type": "header", "content": "Colors" },
    { "type": "color", "id": "overlay_color", "label": "Background", "default": "#000000", "alpha": true },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 30,
      "unit": "%"
    }
  ],
  "presets": [{ "name": "Hero", "category": "Main" }]
}
{% endschema %}
