{% comment %}
  This section is used in the blog template to render the blog page listing all
  articles within a blog.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/blog
{% endcomment %}

{% liquid
  assign section_id = section.settings.custom_id | default: section.id
%}

<section id="{{ section_id }}" class="py-16 bg-slate-50">
  <div class="container mx-auto px-4">
    <header class="max-w-5xl space-y-3 lg:space-y-4">
      <p class="text-xs font-semibold tracking-[0.5em] text-gray-500 uppercase">
        {{ blog.title }}
      </p>
      {% if blog.description != blank %}
        <p class="text-lg text-gray-600">
          {{ blog.description }}
        </p>
      {% endif %}
    </header>

    {% paginate blog.articles by 15 %}
      <div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {% for article in blog.articles %}
          <article class="flex h-full flex-col rounded-[28px] border border-white/0 bg-white shadow-lg shadow-slate-900/5 transition hover:-translate-y-1 hover:border-gray-200 hover:shadow-lg">
            <div class="relative h-56 overflow-hidden rounded-t-[28px] bg-slate-100">
              {% if article.image %}
                {{ article.image | image_url: width: 1200 | image_tag: class: 'h-full w-full object-cover transition duration-500 ease-out group-hover:scale-105' }}
              {% else %}
                <div class="absolute inset-0 bg-gradient-to-br from-slate-200 to-slate-300"></div>
              {% endif %}
            </div>

            <div class="flex flex-1 flex-col gap-3 p-6">
              <div class="text-xs font-medium uppercase tracking-[0.4em] text-indigo-500">
                {{ article.published_at | date: "%b %d, %Y" }}
              </div>

              <h2 class="text-xl font-semibold leading-snug text-slate-900">
                <a class="transition hover:text-indigo-600" href="{{ article.url }}">
                  {{ article.title }}
                </a>
              </h2>

              {% if article.author %}
                <p class="text-sm text-gray-500">
                  {{ article.author }}
                </p>
              {% endif %}

              <p class="text-sm text-slate-600 leading-relaxed">
                {{ article.excerpt | strip_html | truncatewords: 30 }}
              </p>
            </div>
          </article>
        {% endfor %}
      </div>

      {%- if paginate.pages > 1 -%}
        <div class="mt-12">
          {{- paginate | default_pagination -}}
        </div>
      {%- endif -%}
    {% endpaginate %}
  </div>
</section>

{% schema %}
{
  "name": "Blog",
  "settings": []
}
{% endschema %}
