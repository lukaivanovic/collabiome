{%- liquid
  assign faq_data = product.metafields.custom.faq.value
-%}

<div class="container-small py-30">
  <div class="bg-white rounded-3xl p-8">
    <h2 class="text-4xl uppercase font-bold text-black mb-4">FAQ</h2>

    {% if faq_data.description %}
      <p class="text-base text-gray-600 mb-8">
        {{ faq_data.description }}
        <a href="mailto:pitanja@kollagenboost.com" class="underline">pitanja@kollagenboost.com</a>
        {% comment %} {{ 'sections.product_faq.contact_text' | t }} {% endcomment %}
      </p>
    {% else %}
      <p class="text-base text-gray-600 mb-8">
        {% comment %} {{ 'sections.product_faq.default_description' | t }} {% endcomment %}
        <a href="mailto:pitanja@kollagenboost.com" class="underline">pitanja@kollagenboost.com</a>
        {% comment %} {{ 'sections.product_faq.contact_text' | t }} {% endcomment %}
      </p>
    {% endif %}

    <div class="faq-accordion">
      {% for item in faq_data %}
        <collapsible-item class="faq-item border-b border-gray-200 last:border-b-0 bg-white hover:border-gray-300 transition-colors">
          <button
            class="faq-question w-full text-left py-4 flex items-center justify-between hover:bg-gray-50 transition-colors px-1"
            data-collapsible-trigger
            type="button"
          >
            <span class="text-base font-medium text-black pr-4">{{ item.title }}</span>
            {{ 'icon-plus.svg' | inline_asset_content }}
          </button>
          <div class="faq-answer" data-collapsible-content>
            <div class="text-base text-gray-700 px-4 pb-4">
              {{ item.answer }}
            </div>
          </div>
        </collapsible-item>
      {% endfor %}
    </div>

    <script src="{{ 'collapsible.js' | asset_url }}" defer></script>
  </div>
</div>

{% stylesheet %}
  .faq-accordion {
    max-width: 100%;
  }

  .faq-item {
    transition: all 0.3s ease;
  }

  .faq-question {
    cursor: pointer;
    outline: none;
  }

  .faq-question:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .faq-item.active .faq-answer {
    max-height: 500px;
  }

  @media (max-width: 768px) {
    .faq-question span {
      font-size: 14px;
    }

    .faq-answer .text-base {
      font-size: 14px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Product FAQ",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "FAQ title",
      "default": "Frequently asked questions"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "FAQ description",
      "default": "Got a less-frequently asked question?"
    },
    {
      "type": "text",
      "id": "contact_email",
      "label": "Contact email",
      "default": "pitanja@kollagenboost.com"
    }
  ],
  "presets": [
    {
      "name": "Product FAQ",
      "category": "Product"
    }
  ]
}
{% endschema %}
