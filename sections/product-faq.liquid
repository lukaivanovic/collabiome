{%- liquid
  assign faq_data = product.metafields.custom.faq.value
-%}

<div class="container-small py-30">
  <div>
    <h2 class="text-4xl uppercase font-bold text-black mb-4">FAQ</h2>

    {% if faq_data.description %}
      <p class="text-base text-gray-600 mb-8">
        {{ faq_data.description }}
        <a href="mailto:pitanja@kollagenboost.com" class="underline">pitanja@kollagenboost.com</a>
        {% comment %} {{ 'sections.product_faq.contact_text' | t }} {% endcomment %}
      </p>
    {% else %}
      <p class="text-base text-gray-600 mb-8">
        {% comment %} {{ 'sections.product_faq.default_description' | t }} {% endcomment %}
        <a href="mailto:pitanja@kollagenboost.com" class="underline">pitanja@kollagenboost.com</a>
        {% comment %} {{ 'sections.product_faq.contact_text' | t }} {% endcomment %}
      </p>
    {% endif %}

    <div>
      {% for item in faq_data %}
        <collapsible-item class="faq-item border-b border-red-500 last:border-b-0 transition-colors">
          <button
            class="faq-question  cursor-pointer  outline-none w-full text-left py-4 flex items-center justify-between hover:bg-gray-50 transition-colors focus:outline-none focus:ring-0"
            data-collapsible-trigger
            type="button"
          >
            <span class="text-lg font-medium text-black pr-4">{{ item.title }}</span>
            <div class="w-7 h-7 bg-blue-50 text-blue-800 rounded-full flex items-center justify-center [&>svg]:size-4">
              {{ 'icon-plus.svg' | inline_asset_content }}
            </div>
          </button>
          <div class="faq-answer" data-collapsible-content>
            <div class=" text-gray-700 py-4">
              {{ item.answer }}
            </div>
          </div>
        </collapsible-item>
      {% endfor %}
    </div>

    <script src="{{ 'collapsible.js' | asset_url }}" defer></script>
  </div>
</div>

{% stylesheet %}
  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .faq-item.active .faq-answer {
    max-height: 500px;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Product FAQ",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "FAQ title",
      "default": "Frequently asked questions"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "FAQ description",
      "default": "Got a less-frequently asked question?"
    },
    {
      "type": "text",
      "id": "contact_email",
      "label": "Contact email",
      "default": "pitanja@kollagenboost.com"
    }
  ],
  "presets": [
    {
      "name": "Product FAQ",
      "category": "Product"
    }
  ]
}
{% endschema %}
